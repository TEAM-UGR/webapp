Assignment #00¶
Learning Objectives & Assignment Goals¶
The goal of this assignment is to setup local development environment and sign up for cloud & SaaS services we will use in this course. An easy way to relate to this assignment is to think of the work developers usually do in their first day/week at a new job.

Note

This assignment is a prerequisite for getting future assignments graded.
Individual assignment weightage on the course grade of this assignment is 0%.
Students are solely responsible for the cost of tools and services used in the course. Northeastern University, College of Engineering, and the instructor will not be responsible for any of the charges incurred.
The cloud service provider might require a valid credit or debit card even for free tiers. If you do not have a credit or debit card, please let the instructor or TA know ASAP.
Due Date¶
Section	Submission Due Date	Grading Due Date
Boston	N/A	N/A
Seattle & Silicon Valley	N/A	N/A
Getting Help¶
Info

Ask all your questions in Canvas discussion thread.

Assignment Tasks¶
Account Signups¶
Info

Don't create a new account for the course if you have an existing account with any of these services.
Set up MFA

You are responsible for the security of your account. It is important that you use strong passwords for all accounts and set up multi-factor authentication for all accounts to add an extra layer of security.

Sign up for Github Student Developer pack.
Sign up for Amazon Web Services (AWS).
Sign up for Google Cloud Platform (GCP). Do not use your Northeastern University email for account sign up.
Register for a student license from JetBrains. You will be able to use an IDE such as IntelliJ IDEA Ultimate with your choice of programming language such as Go, Java, PHP, Ruby, Python, JavaScript, etc.
Optionally sign up for Namecheap account.
Sign up for a Github account. Make sure to personalize your GitHUb profile by setting your profile name and optionally profile picture.
Setup Development Environment¶
Download and install the latest version of Git.
Set your username in Git.
Set your commit email address in Git.
Configure your system to connect to GitHub with SSH.
Install a text editor you are most familiar with. I highly recommend Visual Studio Code and following plugins for it:
GitLens — Git supercharged
HashiCorp Terraform
HCL
Markdown All in One
Prettify JSON
ShellCheck
vscode-base64
YAML
Python
Install IntelliJ IDEA Ultimate if you plan to use it.
Install MySQL or PostgreSQL database.



Link:
https://education.github.com/pack
https://aws.amazon.com/
https://cloud.google.com/?hl=en
https://www.jetbrains.com/community/education/#students
https://www.jetbrains.com/idea/download/?section=windows
https://www.namecheap.com/
https://github.com/
https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-github-profile/customizing-your-profile/personalizing-your-profile
https://docs.github.com/en/get-started/getting-started-with-git/setting-your-username-in-git
https://docs.github.com/en/account-and-profile/setting-up-and-managing-your-personal-account-on-github/managing-email-preferences/setting-your-commit-email-address
https://docs.github.com/en/authentication/connecting-to-github-with-ssh






Assignment #01¶
Due Date¶
Section	Submission Due Date	Grading Due Date
Boston	01/31/2024 @ 9 PM EDT	02/07/2024 @ 9 PM EDT
Seattle & Silicon Valley	02/02/2024 @ 9 PM PDT	02/09/2024 @ 6 PM PDT
Getting Help¶
Info

Ask all your questions in Canvas Discussion. SEA/SJO can ask questions in Teams.

Learning Objectives¶
The objective of this assignment is to select a technology stack for a backend (API only) web application and to implement health check API. The technology stack must meets Cloud-Native Web Application Requirements as outlined below.

Cloud Native Web Application Requirements¶
A cloud-native application is an application that is specifically designed for cloud computing architecture. It takes advantage of cloud computing frameworks, which are composed of loosely coupled cloud services.

Server Operating System: CentOS 8
Programming Language: Any high-level programming language such as Java, Python, Go, Node.js or PHP.
Relational Database: Either MySQL or PostgreSQL. Do not use MongoDB, MSSQL, Oracle, etc.
Backend Framework: Any open-source framework such as Spring, Hibernate, etc.
ORM Framework:
Java: Hibernate
Golang: GORM
JavaScript: Sequelize
Python: SQLAlchemy
UI Framework: N/A
CSS: N/A
Web Application Development¶


RESTful API Requirements¶
All API request/response payloads should be in JSON.
No UI should be implemented for the application.
As a user, I expect all API calls to return with a proper HTTP status code.
As a user, I expect the code quality of the application to be maintained to the highest standards using the unit and/or integration tests.


Health Check RESTful API¶
The question we want to answer is How to detect that a running service instance is unable to handle requests?.
The health check API is a way for us to monitor the health of the application instance and alerts us when something is not working as expected.
Health check API allows us to stop sending traffic to unhealthy instances of the application and to automatically replace/repair them. It also helps us improve user experience by not routing their quests to unhealthy instances.
A Health Check API may check for following:

Database connection - Make sure the application is connected to the database or is able to establish connection at the time of the health check.
Downstream API Calls - Your application may depend on other downstream APIs and outage of downstream API without which you cannot complete the users request.
For this assignment, we are going to implement an endpoint /healthz that will do the following when called:

Check if the application has connectivity to the database.
Return HTTP 200 OK if the connection is successful.
Return HTTP 503 Service Unavailable if the connection is unsuccessful.
The API response should not be cached. Make sure to add cache-control: 'no-cache' header to the response.
The API request should not allow for any payload. The response code should be 400 Bad Request if the request includes any payload.
The API response should not include any payload.
Only HTTP GET method is supported for the /healthz endpoint.
Example Requests¶
Success

curl -vvvv http://localhost:8080/healthz
*   Trying 127.0.0.1:8080...
* Connected to localhost (127.0.0.1) port 8080 (#0)
> GET /healthz HTTP/1.1
> Host: localhost:8080
> User-Agent: curl/8.1.2
> Accept: */*
>
< HTTP/1.1 200 OK
< Cache-Control: no-cache, no-store, must-revalidate;
< Pragma: no-cache
< X-Content-Type-Options: nosniff
< Date: Wed, 20 Sep 2023 01:18:37 GMT
< Content-Length: 0
<
* Connection #0 to host localhost left intact
Failure

 $ curl -vvvv http://localhost:8080/healthz
*   Trying 127.0.0.1:8080...
* Connected to localhost (127.0.0.1) port 8080 (#0)
> GET /healthz HTTP/1.1
> Host: localhost:8080
> User-Agent: curl/8.1.2
> Accept: */*
>
< HTTP/1.1 503 Service Unavailable
< Cache-Control: no-cache, no-store, must-revalidate;
< Pragma: no-cache
< X-Content-Type-Options: nosniff
< Date: Wed, 20 Sep 2023 01:18:57 GMT
< Content-Length: 0
<
* Connection #0 to host localhost left intact
405 Method Not Allowed

 $ curl -vvvv -XPUT http://localhost:8080/healthz
*   Trying 127.0.0.1:8080...
* Connected to localhost (127.0.0.1) port 8080 (#0)
> PUT /healthz HTTP/1.1
> Host: localhost:8080
> User-Agent: curl/8.1.2
> Accept: */*
>
< HTTP/1.1 405 Method Not Allowed
< Cache-Control: no-cache, no-store, must-revalidate;
< Pragma: no-cache
< X-Content-Type-Options: nosniff
< Date: Wed, 20 Sep 2023 01:38:11 GMT
< Content-Length: 0
<
* Connection #0 to host localhost left intact
Submission¶
Warning

The assignment will be considered late if uploaded to Canvas after the due date.

Create a folder with the naming convention firstname_lastname_neuid_## where ## is the assignment number.
Copy complete code for the assignment into this folder.
Create a create a zip of the firstname_lastname_neuid_## directory. The zip file should be firstname_lastname_neuid_##.zip.
Now unzip the zip file in some other directory and confirm the content of the zip files.
Upload the Zip to the correct assignment in Canvas.
You are allowed to resubmit. If you think there may be an issue with the ZIP file, feel free to submit it again. Only the latest submission will be graded.
Grading Guidelines¶
Warning

Following guidelines are for information only. They are subject to change at the discretion of the instructor and TA.

Web Application (100%)¶
Students will demo the web application from their laptops. Download the zip uploaded to Canvas and use the submitted code for demo. Local code cannot be used for demo.
APIs can be demoed using any Postman or Restlet or some other REST client but not via the browser.
The application should not have UI.
Verify the success and failure by shutting down the database server while the application is still running. Restarting the database without restarting the application should work.
Verify that the only HTTP request method supported is GET. Making POST, PUT, DELETE, or PATCH requests should return HTTP status code 405 Method Not Allowed.
Verify that request and response have no payload requirement. The API response should NOT include a body. The request should NOT require any query parameters.
The application connects to either MySQL or PostgreSQL. No other database is allowed.
Verify code is not generated by ChatGPT or Google Bard or GitHub co-pilot.
Application should not throw 500 Internal Server errors.
Application should not require restart between API calls.

Link:
https://spring2024.csye6225.cloud/assignments/01/#cloud-native-web-application-requirements
https://hibernate.org/
https://gorm.io/
https://sequelize.org/
https://www.sqlalchemy.org/
https://en.wikipedia.org/wiki/List_of_HTTP_status_codes







Assignment #02¶
Due Date¶
Section	Submission Due Date	Grading Due Date
Boston	02/7/2024 @ 9 PM EDT	02/15/2024 @ 5 PM EDT
Seattle & Silicon Valley	02/9/2024 @ 9 PM PDT	02/16/2024 @ 6 PM PDT
Getting Help¶
Info

Ask all your questions in Canvas Discussion. SEA/SJO can ask questions in Teams.

Git & GitHub¶
GitHub Subscription¶
All students will need to subscribe to the GitHub Team plan.
Create & Setup GitHub Repository¶
Create a new private GitHub repository for web applications in the GitHub organization you created.
The GitHub repository name must be webapp.
Update README.md in your repository. Your readme file must contain the following:
Prerequisites for building and deploying your application locally.
Build and Deploy instructions for the web application.
Fork the GitHub repository in your namespace. You will do all development work on your fork.
All web application code should now be in this repository.
Add appropriate .gitignore to your repository. A collection of useful .gitignore templates can be found here.
GitHub Repository Branch Protection Rules¶
Learn more about protected branches.
Implement Branch Protection Rules shown in the image below:


Web Application Development¶
About the field data types in Swagger Documentation¶
About the field data types in Swagger docs
Bootstrapping Database¶
The application is expected to automatically bootstrap the database at startup.

Bootstrapping creates the schema, tables, indexes, sequences, etc., or updates them if their definition has changed.
The database cannot be set up manually by running SQL scripts.
It is highly recommended that you use ORM frameworks such as Hibernate (for java), SQLAlchemy (for python), and Sequelize (for Node.js).
RESTful API Requirements¶
All API request/response payloads should be in JSON.
No UI should be implemented for the application.
As a user, I expect all API calls to return with a proper HTTP status code.
As a user, I expect the code quality of the application to be maintained to the highest standards using the unit and/or integration tests. Not required for this assignment.
Authentication Requirements¶
The user must provide a basic authentication token when making an API call to the authenticated endpoint.
The web application must only support Token-Based authentication and not Session Authentication.
APIs To Implement¶
Swagger Docs

Your web application must only support Token-Based Basic authentication and not Session Authentication.
As a user, I must provide a basic authentication token when making an API call to the authenticated endpoint.
Create a new user
As a user, I want to create an account by providing the following information.
Email Address
Password
First Name
Last Name
account_created field for the user should be set to the current time when user creation is successful.
Users should not be able to set values for account_created and account_updated. Any value provided for these fields must be ignored.
Password should never be returned in the response payload.
As a user, I expect to use my email address as my username.
Application must return 400 Bad Request HTTP response code when a user account with the email address already exists.
As a user, I expect my password to be stored securely using the BCrypt password hashing scheme with salt.
Update user information
As a user, I want to update my account information. I should only be allowed to update the following fields.
First Name
Last Name
Password
Attempt to update any other field should return 400 Bad Request HTTP response code.
account_updated field for the user should be updated when the user update is successful.
A user can only update their own account information.
Get user information
As a user, I want to get my account information. Response payload should return all fields for the user except for password.
Implement Continuous Integration (CI) with GitHub Actions¶
Add a GitHub Actions workflow to run simple check (compile code) for each pull request raised. A pull request can only be merged if the workflow executes successfully.
Add Status Checks GitHub branch protection to prevent users from merging a pull request when the GitHub Actions workflow run fails.
Submission¶
Warning

The assignment will be considered late if uploaded to Canvas after the due date.

Create a folder with the naming convention firstname_lastname_neuid_## where ## is the assignment number.
Clone each (all) repository you have created for the course using git clone command into this directory. It is important that you clone your Organization repository and not your fork.
Create a create a zip of the firstname_lastname_neuid_## directory. The zip file should be firstname_lastname_neuid_##.zip.
Now unzip the zip file in some other directory and confirm the content of the zip files.
Upload the Zip to the correct assignment in Canvas.
You are allowed to resubmit. If you think there may be an issue with the ZIP file, feel free to submit it again. Only the latest submission will be graded.
Grading Guidelines¶
Warning

Following guidelines are for information only. They are subject to change at the discretion of the instructor and TA.

Previous Assignment Objectives¶
TAs must verify that students have resolved all open issues from the previous assignment(s).

Git & GitHub Repository¶
Git Repository Content Check (25%)¶
Check the repository for any IDE-specific files. IDE configuration files must not be in the repository.
Verify their .gitignore configuration.
Check the repository for build artifacts such as .class, .jar, .war files and build, node_modules, venv directory. None of these should be checked into the repository.
Check for dependencies. Dependencies from the Maven repository or npm or python should not be committed to the git repository.
Git Forking Workflow (25%)¶
No direct commits are made to organization repository. Verify student is working from forked repository and using feature branch. There should be no direct commits to their main branch in their forked repository.
GitHub repository has branch protection rule setup.
GitHub Workflow is triggered when pull request is raised and pull requests can only be merged if the status check is successful. To test failure, ask student to raise a pull request updated the GitHub Actions workflow to execute exit 1 command.
Web Application (50%)¶
Students will demo the assignment from CentOS 8 virtual machine running in Digital Ocean (or AWS or GCP).

Preparing for Demo¶
Launch Centos 8 VM on Digital Ocean (or AWS or GCP).
Download code submission from Canvas and SCP the zip file to the VM.
Install MySQL or MariaDB or PostgreSQL RDBMS on the VM.
Install dependencies such as Node, Python, Java on the VM.
Build the application from source in ZIP file if needed.
Application configuration may be manually updated by the student at this point.
Launch the application and validate that you can hit the healthz endpoint and application is healthy.
No SQL script should be manually executed to set up the database.
Bootstrapping Database (20%)¶
Start the application.
The database objects such as tables, indexes, etc. should be automatically created when application is started.
Students are not allowed to run any SQL scripts manually.
Web Application APIs (30%)¶
Verify passwords are encrypted with BCrypt hashing and salt in the database.
Verify that authentication is done via basic auth (token-based) and not session-based.
APIs can be demoed using any Postman or Restlet or some other REST client but not from the browser.
Check the response payload to make sure it meets the assignment objective. The password field should not be part of the response payload.
Test for duplicate account creation in the application. The application should NOT allow multiple accounts with the same email address.
Test updating fields such as account_created and account_updated. Users should never be able to set values for them. These fields are set by the application.
Verify non-email username cannot be used for account creation.
No 500 internal server errors are returned by the application.
No restart of the application server between API calls.

Links:
https://swagger.io/specification/
https://swagger.io/docs/specification/data-models/data-types/
https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication
https://security.stackexchange.com/questions/81756/session-authentication-vs-token-authentication
https://app.swaggerhub.com/apis-docs/csye6225-webapp/cloud-native-webapp/2024.spring.02
https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/managing-protected-branches/about-protected-branches





Assignment #03¶
Due Date¶
Section	Submission Due Date	Grading Due Date
Boston	02/15/2024 @ 4 PM EDT	02/21/2024 @ 9 PM EDT
Seattle & Silicon Valley	02/16/2024 @ 9 PM PDT	02/23/2024 @ 6 PM PDT
Learning Objectives¶
Install gcloud CLI¶
Install and configure gcloud CLI on your development machine (laptop). See Install the gcloud CLI for detailed instructions.

Infrastructure as Code¶
Note

Wherever supported, you must provide unique names to the resources. You may be asked to create multiple networks in the same account during the demo.

We are going to start setting up networking in our Google Cloud project. This assignment will focus on setting up our networking resources such as Virtual Private Cloud (VPC), Internet Gateway, Route Table, and Routes. We will use Terraform for infrastructure setup and tear down.

Create & Setup GitHub Repository¶
Create a new private GitHub repository for web applications in the GitHub organization you created.
The GitHub repository name must be tf-gcp-infra.
Update README.md in your repository with instructions for setting up your infrastructure using Terraform.
Fork the GitHub repository in your namespace. You will do all development work on your fork.
All Terraform templates should be in this repository.
Add appropriate .gitignore to your repository. A collection of useful .gitignore templates can be found here.
GitHub Repository Branch Protection Rules¶
Learn more about protected branches.
Implement Branch Protection Rules shown in the image below: 
Add status check to validate terraform templates when pull request is raised.
Enable GCP Service APIs¶
Google Cloud Platform requires you to enable services (APIs) before you can use them. Services should be enabled for the project before they are used. Once services are enabled, it may take 10-15 minutes for them to work. You can do this from the Google Cloud Console and make sure you have these documented in the README.md. DO NOT ENABLE ALL THE APIs.

Google Cloud Platform Networking Setup¶
Here is what you need to do for networking infrastructure setup:

Create Virtual Private Cloud (VPC) with following requirements:
auto-create subnets should be disabled.
Routing mode should be set to regional.
No default routes should be created.
Create subnets in your VPC.
You must create a 2 subnets in the VPC, first one should be named webapp and second one should be named db.
The subnet has a /24 CIDR address range.
Add a route to 0.0.0.0/0 with next hop to Internet Gateway and attach it to your `VPC.
Infrastructure as Code with Terraform¶
For this objective, you must complete the following tasks:

Install and set up the gcloud CLI and Terraform.
Create a Terraform configuration file that will setup all the networking resources.
Values should not be hard coded in your terraform configuration files.
You must be able to use the same terraform configuration files in the same GCP project and region to create multiple VPCs including all of its resources.
Web Application - Integration Tests¶
Danger

Do not implement tests using curl or postman. You will need to execute the tests as part of pull requests and add them to status check.

Implement integration (and not unit) tests for the /v1/user endpoint with a new GitHub Actions workflow. Do not delete workflow from previous assignments as it must continue to function in parallel to the new one.
Test 1 - Create an account, and using the GET call, validate account exists.
Test 2 - Update the account and using the GET call, validate the account was updated.
This will require your GitHub action to install and setup an actual MySQL and PostgreSQL instance and provide configuration to the application to connect to it.
Submission¶
Danger

The assignment will be considered late if uploaded to Canvas after the due date.
DO NOT UPLOAD CODE FROM YOUR FORKED REPOSITORY TO CANVAS
All work for this assignment must be done on the feature branch in your fork and merged to the main branch.
Submit your code from all the repositories in this assignment. Read the instructions carefully to create your zip file.
Create a folder with the naming convention firstname_lastname_neuid_## where ## is the assignment number.
In the firstname_lastname_neuid_##directory clone all of your GitHub (organization) repositories with the git clone command. It is important that you clone the repos so that your commit history and branches are preserved.
Once you have cloned all of your repositories, you will create a zip of the firstname_lastname_neuid_## directory. The zip file should be firstname_lastname_neuid_##.zip where ## is the assignment number.
Now unzip the zip file in some other directory and confirm the content of the zip files.
Upload the Zip to this assignment.
You are allowed to resubmit 3 times. If you think there may be an issue with the ZIP file, feel free to submit it again. Only the latest submission will be used for grading.
Grading Guidelines¶
Warning

The following guidelines are for information only. They are subject to change at the discretion of the instructor and TA. A 10% penalty will be imposed if the application crashes due to unhandled exceptions/errors.

Previous Assignment Objectives¶
TAs must verify that students have resolved all open issues from the previous assignment(s).

Git Repository Content Check (10%)¶
Application Code¶
Check the repository for any IDE-specific files. IDE configuration files must not be in the repository.
Verify their .gitignore configuration.
Check the repository for build artifacts such as .class, .jar, .war files and build, node_modules, venv directory. None of these should be checked into the repository.
Check for dependencies. Dependencies from the Maven repository or npm or python should not be committed to the git repository.
Infrastructure Code¶
Check if the repository has been set up with .gitignore for Terraform.
Git Forking Workflow (10%)¶
Verify student has followed the git forking workflow. Code is committed using pull requests and is not pushed directly to the main branch.
GitHub Status Check for IaC (15%)¶
Infrastructure as Code (40%)¶
Web Application - Integration Tests (25%)¶

Links:
https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/managing-protected-branches/about-protected-branches
https://github.com/github/gitignore




Assignment #04¶
Due Date¶
Section	Submission Due Date	Grading Due Date
Boston	02/21/2024 @ 9 PM ET	02/28/2024 @ 9 PM ET
Seattle & Silicon Valley	02/23/2024 @ 9 PM PT	03/01/2024 @ 6 PM PT
Learning Objectives¶
The objective of this assignment is to learn how to build custom machine images with our application and dependencies baked in.

Install gcloud CLI¶
Install and configure gcloud CLI on your development machine (laptop). See Install the gcloud CLI for detailed instructions.

Packer & Custom Images - Building Custom Application Images using Packer¶
Note

For this assignment only, install MySQL/MariaDB/PostgreSQL locally in the custom image.

Use Centos Stream 8 as your source image to create a custom image using Packer.
All custom images you build should be private. Only you can launch instances from it.
All custom image builds should happen in your DEV GCP project.
Custom image builds should be set up to run in your default VPC.
The custom image should include everything needed to run your application and the application binary itself. For e.g., if you are using Tomcat to run your Java web application, your custom image must have Java & Tomcat installed. You should also make sure the Tomcat service will start up when an instance is launched. If you are using Python, make sure you have the right version of python and the libraries you need to be installed in the custom image.
The packer template should be stored in the same repo as the web application.
For this assignment only, install MySQL/MariaDB/PostgreSQL locally in the custom image.
Packer Continuous Integration - Add New GitHub Actions Workflow for Status Check¶
When a pull request is raised, this GitHub Actions workflow should do the following:

Run the packer fmt command. If this command modifies the packer template, the workflow should fail and prevent users from merging the pull request.
Run the packer validate command. If this command fails to validate the packer template, the workflow should fail and prevent users from merging the pull request.
Packer Continuous Integration - Add New GitHub Actions Workflow to Build Packer custom image¶
Danger

Make sure you do not trigger your workflow to build custom image when pull request is raised. It should only build custom image when pull request is merged.

Setup

You will need to create a new IAM service account (manually in GCP console) in the DEV GCP project for GitHub Actions and configure the security credentials in your organization repository. Refer to this for more details.
Grant the service account the roles needed. See documentation for more details.
Install & configure gcloud cli on your GitHub Actions runner with this marketplace action.
When a pull request is merged, this GitHub Actions workflow should be triggered to do the following:

Run the integration test.
Build the application artifact (war, jar, zip, etc.). This artifact should be build on the GitHub actions runner and not in the custom image i.e. do not git clone your repository in the packer template and then build it. You will build the artifact on the runner and copy it into the custom image.
Build the custom image with following
Create a local user csye6225 with primary group csye6225. This user should not have a login shell i.e. login shell should be /usr/sbin/nologin. See https://www.baeldung.com/linux/create-non-login-user for details.
Install application dependencies and set up the application by copying the application artifacts and the configuration files.
The application artifacts, configuration, etc. must be owned by user csye6225 and group csye6225.
Add your systemd service file to /etc/systemd/system and configure it to start your service when instance is launched.
Run systemctl daemon-reload with sudo
Run systemtl enable <service_name> with sudo
No custom image should be built if the any of the jobs or steps in the workflow fail.
Infrastructure as Code w/Terraform¶
In this assignment, you will update the Terraform template to add the following resources.

Firewall¶
Set up firewall rules for you custom VPC/Subnet to allow traffic from the internet to the port your application listens to. Do not allow traffic to SSH port from the internet.

References¶
google_compute_firewall
Compute Engine Instance (VM)¶
Create an compute engine instance with the following specifications. For any parameter not provided in the table below, you may go with default values. The instance must be launched in the VPC created by your Terraform IaC code. You cannot launch the instance in the default VPC.

Parameter	Value
Boot disk Image	CUSTOM IMAGE
Boot disk type	Balanced
Size (GB)	100
References¶
google_compute_instance
GCP Operating system details
Submission¶
Danger

The assignment will be considered late if uploaded to Canvas after the due date.
DO NOT UPLOAD CODE FROM YOUR FORKED REPOSITORY TO CANVAS
All work for this assignment must be done on the feature branch in your fork and merged to the main branch.
Submit your code from all the repositories in this assignment. Read the instructions carefully to create your zip file.
Create a folder with the ncustom imageng convention firstname_lastname_neuid_## where ## is the assignment number.
In the firstname_lastname_neuid_##directory clone all of your GitHub (organization) repositories with the git clone command. It is important that you clone the repos so that your commit history and branches are preserved.
Once you have cloned all of your repositories, you will create a zip of the firstname_lastname_neuid_## directory. The zip file should be firstname_lastname_neuid_##.zip where ## is the assignment number.
Now unzip the zip file in some other directory and confirm the content of the zip files.
Upload the Zip to this assignment.
You are allowed to resubmit 3 times. If you think there may be an issue with the ZIP file, feel free to submit it again. Only the latest submission will be used for grading.


Links:
https://cloud.google.com/sdk/docs/install
https://github.com/hashicorp/packer-plugin-googlecompute/blob/main/docs/README.md#running-on-google-cloud
https://github.com/marketplace/actions/set-up-gcloud-cloud-sdk-environment#service-account-key-json
https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/compute_firewall
https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/compute_instance
https://cloud.google.com/compute/docs/images/os-details










Assignment #05¶
Due Date¶
Section	Submission Due Date	Grading Due Date
Boston	02/29/2024 @ 4 PM ET	03/13/2024 @ 9 PM ET
Seattle & Silicon Valley	03/04/2024 @ 9 PM PT	03/15/2024 @ 6 PM PT
Learning Objectives¶
The objective of this assignment to learn how to auto-configure our web application with details for the database server and setup autorun for our service so that it starts up without requiring any manual intervention from the administrator.

Infrastructure as Code¶
VPC Update¶
Setup private services access in your VPC. You will need to enable the Service Networking API in your project.

Reference Implementation: PRIVATE SERVICES ACCESS

CloudSQL Instance (google_sql_database_instance)¶
Warning

Setting Public accessibility to true will expose your instance to the internet.

The CloudSQL instance should be created with the following default configuration with option to override them with variables. You may use any values/settings for any property not mentioned below.

Doc: google_sql_database_instance

Property	Value
deletion_protection	false
availability_type	regional
disk_type	pd-ssd
disk_size	100
ipv4_enabled	false
private_network	YOUR CUSTOM VPC
CloudSQL Database (google_sql_database)¶
Create a database in the CloudSQL instance.

Doc: google_sql_database

Property	Value
name	webapp
instance	REF_TO_CLOUDSQL_INSTANCE
CloudSQL Database User (google_sql_user)¶
Create a user in the CloudSQL database with a randomly generated password.

Docs :

google_sql_user
random_password
Property	Value
name	webapp
instance	REF_TO_CLOUDSQL_INSTANCE
password	RANDOMLY_GENERATED_PASSWORD
Startup Script for Web Application Compute Engine Instance¶
The web application’s database must be the CloudSQL instance launched by with Terraform when running on the GCE instance.
GCE instance should be created with startup script.
Database configuration such as username, password, and hostname should be passed to the web application by the startup script.
[Optional] You want want to configure your systemd unit to wait for startup script to have completed successfully.
Web Application Packer Image Updates¶
You can no longer install/use the local database on the GCE instance. Update your packer template to remove the local database server from the custom image.
Note: You will use local database for your integration tests in your GitHub Actions.
Network Security¶
CloudSQL instance should not be accessible from the internet.
CloudSQL instance can only be accessed by the compute engine instance running the web application.
CloudSQL instance should be in the database subnet.
Submission¶
Danger

The assignment will be considered late if uploaded to Canvas after the due date.
DO NOT UPLOAD CODE FROM YOUR FORKED REPOSITORY TO CANVAS
All work for this assignment must be done on the feature branch in your fork and merged to the main branch.
Submit your code from all the repositories in this assignment. Read the instructions carefully to create your zip file.
Create a folder with the naming convention firstname_lastname_neuid_## where ## is the assignment number.
In the firstname_lastname_neuid_##directory clone all of your GitHub (organization) repositories with the git clone command. It is important that you clone the repos so that your commit history and branches are preserved.
Once you have cloned all of your repositories, you will create a zip of the firstname_lastname_neuid_## directory. The zip file should be firstname_lastname_neuid_##.zip where ## is the assignment number.
Now unzip the zip file in some other directory and confirm the content of the zip files.
Upload the Zip to this assignment.
You are allowed to resubmit 3 times. If you think there may be an issue with the ZIP file, feel free to submit it again. Only the latest submission will be used for grading.


Links:
https://github.com/terraform-google-modules/terraform-google-network/blob/v9.0.0/examples/private_service_connect_google_apis/main.tf
https://registry.terraform.io/providers/hashicorp/google/5.17.0/docs/resources/sql_database_instance
https://registry.terraform.io/providers/hashicorp/google/5.17.0/docs/resources/sql_database
https://registry.terraform.io/providers/hashicorp/google/5.17.0/docs/resources/sql_user
https://registry.terraform.io/providers/hashicorp/random/latest/docs/resources/password


Assignment #06¶
Due Date¶
Section	Submission Due Date	Grading Due Date
Boston	03/20/2024 @ 9 PM ET	03/27/2024 @ 9 PM ET
Seattle & Silicon Valley	03/22/2024 @ 9 PM PT	03/29/2024 @ 6 PM PT
DNS¶
Register Domain Name¶
Note

Namecheap offers a free domain with the Github Student Developer pack but only .me TLD domain.

Register a domain name with a domain registrar such as Namecheap, AWS, gandi.net, GoDaddy.
Your are free to pick a domain name with any TLD.
DNS Setup - Cloud DNS¶
Note

This setup should be done manually from the GCP console.

Your new domain will be set up to use the registrar’s name servers by default.

Reference Documentation:

Create, modify, and delete zones
How to Change DNS For a Domain in Namecheap
Create A Public Zone & Setup Nameservers for Cloud DNS¶
Create a public zone in Cloud DNS manually from the GCP console for the your-domain-name.tld.
Configure Namecheap to use custom name servers provided by Cloud DNS to use the Cloud DNS name servers.
Infrastructure as Code w/Terraform¶
Note

<port> refers to the port number at which your application listens.

Cloud DNS zone should be updated by Terraform. Add or Update A record to the Cloud DNS zone so that your domain points to your VM instance and your web application is accessible at http://your-domain-name.tld:<port>/. Note that the port numbers are not part of DNS record.
Your application must be accessible using root context i.e. http://your-domain-name.tld:<port>/ and not http://your-domain-name.tld:<port>/app-0.1/. Note: This only applies to application build with Java & uses Tomcat to run the application. For most students there is no work to do.
Application Logging & Metrics¶
Enable Project APIs¶
Troubleshoot Ops Agent installation and start-up
Update Custom Machine Image¶
Update your packer template to install the Ops Agent in your custom image.
The Ops Agent must be configured for you application logs (even if these log files don't exist yet).
Create a Service Account for Virtual Machine & Attach to the Virtual Machine¶
Create a Service Account to attach to your virtual machine.
Attach the service account to the compute instance. See https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/compute_instance#service_account.
Bind IAM Role to the Service Account¶
Bind the appropriate role to the service account with google_project_iam_binding
Roles:
Logging Admin
Monitoring Metric Writer
Email Configuration¶
Note

The following steps are done manually. You only need to configure Sendgrid or Mailchimp and not both.

Sendgrid.
Mailchimp
Web Application Updates¶
Update application to write Structured Logs in JSON.
All application log data should be streamed to Google Cloud Observability and available in Log Explorer.
Submission¶
Danger

The assignment will be considered late if uploaded to Canvas after the due date.
DO NOT UPLOAD CODE FROM YOUR FORKED REPOSITORY TO CANVAS
All work for this assignment must be done on the feature branch in your fork and merged to the main branch.
Submit your code from all the repositories in this assignment. Read the instructions carefully to create your zip file.
Create a folder with the naming convention firstname_lastname_neuid_## where ## is the assignment number.
In the firstname_lastname_neuid_##directory clone all of your GitHub (organization) repositories with the git clone command. It is important that you clone the repos so that your commit history and branches are preserved.
Once you have cloned all of your repositories, you will create a zip of the firstname_lastname_neuid_## directory. The zip file should be firstname_lastname_neuid_##.zip where ## is the assignment number.
Now unzip the zip file in some other directory and confirm the content of the zip files.
Upload the Zip to this assignment.
You are allowed to resubmit 3 times. If you think there may be an issue with the ZIP file, feel free to submit it again. Only the latest submission will be used for grading.
Grading Guidelines¶
Warning

The following guidelines are for information only. They are subject to change at the discretion of the instructor and TA. A 10% penalty will be imposed if the application crashes due to unhandled exceptions/errors.

Previous Assignment Objectives¶
TAs must verify that students have resolved all open issues from the previous assignment(s).

Git Repository Content Check¶
Check the repository for any IDE-specific files. IDE configuration files must not be in the repository.
Verify their .gitignore configuration.
Check the repository for build artifacts such as .class, .jar, .war files and build, node_modules, venv directory. None of these should be checked into the repository.
Check for dependencies. Dependencies from the Maven repository or npm or python should not be committed to the git repository.
Git Forking Workflow¶
Verify student has followed the git forking workflow. Code is committed using pull requests and is not pushed directly to the main branch.
DNS¶
Student has registered domain name or has pre-existing one to use for the course.
Verify a public Cloud DNS zone has been created in GCP and Nameservers configured with the registrar (namecheap, gandi.net, aws, godaddy, etc). Verification can be done with the command dig NS domainname.tld
Launching an instance from terraform updates (or creates) an A record for the instance with public IP. Verify this with dig A domainname.tld command. It should return a public IPv4 address of the instance. Verify this by deleting the A record from console and running terraform apply. The plan should have one update for the A record.
The application is accessible using http://domainname.tld endpoint. Validate existing APIs with this endpoint.
Application Logging & Metrics¶
Verify the Ops Agent in installed in the custom image when build with Packer
The IaC Terraform template creates a service account.
The IaC Terraform template creates a project level IAM binding for Logging admin role
The IaC Terraform template creates a project level IAM binding for Monitoring metrics writer role
The IaC Terraform template assigns the service account to the compute instance
Application writes structured logs in JSON. Log messages should not be split into multiple log entries in Google Logging Explorer.
The timestamp of the log message in the log file and GCP logging explorer match
The severity (INFO, DEBUG, ERROR, WARN) of log message is accurately displayed in CP logging explorer. Log messages should not have DEFAULT severity.


Links:
https://cloud.google.com/dns/docs/zones
https://www.namecheap.com/support/knowledgebase/article.aspx/767/10/how-can-i-change-the-nameservers-for-my-domain
https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/google_service_account
https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/compute_instance#service_account
https://cloud.google.com/logging/docs/access-control#permissions_and_roles
https://registry.terraform.io/providers/hashicorp/google/latest/docs/resources/google_project_iam#google_project_iam_binding
https://docs.sendgrid.com/for-developers/sending-email
https://mailchimp.com/






